# Android启动流程分析

## 冷启动

​	冷启动是指应用从头开始启动，系统进程在冷启动后才创建(fork)应用进程。自启动设备或系统终止应用程序依赖，首次启动应用程序时会发生冷启动。这种类型的启动在最小化启动时间方面提出了最大的挑战，因为与其他启动状态相比，系统和应用程序要做的工作过呢更多。

在冷启动的开始，系统具有三个任务。这些任务是：

1. 加载并启动应用程序。
2. 启动后立即为应用显示空白的启动窗口。
3. 创建应用程序 [流程。](https://developer.android.com/guide/components/processes-and-threads#Processes)

系统创建应用进程，应用进程就负责后续阶段:

1. 创建应用对象。
2. 启动主线程。
3. 创建主 Activity。
4. 扩充视图。
5. 布局屏幕。
6. 执行初始绘制。

一旦应用进程完成第一次绘制，系统进程九会替换掉当前显示的后台窗口，替换为主Activity.此时，用户可以开始应用。

![img](https://developer.android.com/topic/performance/images/cold-launch.png)

## 热启动

应用的热启动比冷启动简单得多，开销也更低。在热启动中，系统的所有工作就是将您的 Activity 带到前台。只要应用的所有 Activity 仍驻留在内存中，应用就不必重复执行对象初始化、布局膨胀和呈现。

但是，如果一些内存为响应内存整理事件（如 `onTrimMemory()`）而被完全清除，则需要为了响应热启动事件而重新创建相应的对象。

热启动显示的屏幕上行为和冷启动场景相同：在应用完成 Activity 呈现之前，系统进程将显示空白屏幕。

## 温启动

温启动包含了在冷启动期间发生的部分操作；同时，它的开销要比热启动高。有许多潜在状态可视为温启动。例如：

- 用户在退出应用后又重新启动应用。进程可能已继续运行，但应用必须通过调用 `onCreate()` 从头开始重新创建 Activity。
- 系统将您的应用从内存中逐出，然后用户又重新启动它。进程和 Activity 需要重启，但传递到 `onCreate()` 的已保存的实例 state bundle 对于完成此任务有一定助益。

