# `ANR`相关知识点

## 什么是`ANR`

`ANR`是一套监控`Android`应用响应是否及时的机制,负责更新界面的应用主线程无法处理用户输入事件或绘制操作。

## 造成`ANR`的场景

- `Service Timeout`:前台服务在20S内未执行完成
- `BrodcaseQueue Timeout`:前台广播在**10S**内未执行完成
- `ContentProvider Timeout`:`publish`在**10s**内没进行完
- `InputDispatching Timeout`:输入事件分发超时**5S**,包括按键和触摸时间。

## 出现`ANR`的集中常用模式

- 应用在主线程上耗时执行I/O的操作
- 应用在主线程进行耗时计算任务
- 主线程在对另一个进程进行同步binder调用，而后者需要很长时间才能返回
- 主线程处于阻塞状态，为发生在另一个线程的长操作等待同步的块
- 主线程在进程中或通过binder调用与另一个线程之间发生死锁。主线程不只是在等待长操作执行完毕，而且处于死锁状态。

